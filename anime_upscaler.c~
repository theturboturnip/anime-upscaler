#include <stdio.h>
#include <string.h>

typedef BYTE unsigned char;

int main(int argc, char* argv[]){
	if (argc == 1){
		fprintf(stderr, "Not enough arguments!\n");
		return 1;
	}
	
	unsigned int currentBufferSize = 8; // Enough to store signature
	BYTE* buffer = malloc(sizeof(BYTE) * currentBufferSize);

	// Open an input pipe from ffmpeg and an output pipe to a second instance of ffmpeg
    FILE *pipein = popen("ffmpeg -i small.mp4 -f image2pipe -vcodec png -", "r");

	// NOTE: For waifu2x file output, use -o /dev/stdout
	
    FILE *pipeout = popen("ffmpeg -y -f rawvideo -vcodec rawvideo -pix_fmt rgb24 -s 1280x720 -r 25 -i - -f mp4 -q:v 5 -an -vcodec mpeg4 output.mp4", "w");
     
	
}
